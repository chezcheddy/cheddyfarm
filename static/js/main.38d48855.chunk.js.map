{"version":3,"sources":["App.js","index.js"],"names":["NearConfig","networkId","nodeUrl","bananaContractName","contractName","walletUrl","Avocado","role","aria-label","className","Banana","Cucumber","Near","Berry","App","props","state","connected","signedIn","accountId","account","claiming","bananaNum","_balanceRefreshTimer","_initNear","then","setState","_accountId","account_id","accountIndex","account_index","avocadoBalance","parseFloat","avocado_balance","this","_pixelCost","bananaBalance","banana_balance","bananaBalanceBN","BN","numPixels","num_pixels","farmingPreference","farming_preference","startTime","Date","getTime","avocadoPixels","bananaPixels","avocadoRewardPerMs","bananaRewardPerMs","bananaRewardPerMsBN","div","stats","_bananaContract","get_account","parseBananaAccount","_contract","cucumberAccount","Object","assign","nearBalanceBn","near_balance","cucumberBalanceBn","cucumber_balance","nearClaimed","near_claimed","Math","pow","nearBalance","toString","cucumberBalance","percent","totalSupply","currentTime","get_last_reward_timestamp","lastReward","get_stats","rawStats","totalSupplyBn","total_cucumber_balance","totalNearClaimed","total_near_claimed","totalNearRewarded","total_near_received","timeUntilRewards","timeFromLastRewards","refreshStats","getAccount","clearInterval","setInterval","t","keyStore","nearAPI","BrowserLocalStorageKeyStore","deps","near","_keyStore","_near","_walletConnection","getAccountId","_account","viewMethods","changeMethods","get_pixel_cost","_pixelCostBN","refreshAccountStats","requestSignIn","signOut","bananas","trunc","mul","transfer_with_vault","receiver_id","amount","payload","claim_near","content","onClick","logOut","toFixed","min","max","value","onChange","enableMobileNumericKeyboard","disabled","stakeBananas","b","claimNear","style","marginBottom","aria-hidden","initialTime","direction","timeToUpdate","lastUnit","Fragment","Hours","Minutes","formatValue","v","padStart","Seconds","Milliseconds","href","React","Component","Swap","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.38d48855.chunk.js","sourcesContent":["import \"./App.scss\";\nimport React from 'react';\nimport BN from 'bn.js';\nimport * as nearAPI from 'near-api-js'\nimport InputNumber from 'react-input-number';\nimport Timer from 'react-compound-timer';\n\nconst IsMainnet = false;\nconst TestNearConfig = {\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  bananaContractName: 'dev-1604708520705-2360364',\n  contractName: 'dev-1605908677227-6741841',\n  walletUrl: 'https://wallet.testnet.near.org',\n};\nconst MainNearConfig = {\n  networkId: 'mainnet',\n  nodeUrl: 'https://rpc.mainnet.near.org',\n  bananaContractName: 'berryclub.ek.near',\n  contractName: 'farm.berryclub.ek.near',\n  walletUrl: 'https://wallet.near.org',\n};\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig;\n\nconst Avocado = <span role=\"img\" aria-label=\"avocado\" className=\"berry\">ü•ë</span>;\nconst Banana = <span role=\"img\" aria-label=\"banana\" className=\"berry\">üçå</span>;\nconst Cucumber = <span role=\"img\" aria-label=\"cucumber\" className=\"berry\">ü•í</span>;\nconst Near = <span role=\"img\" aria-label=\"near\" className=\"berry\">‚ìÉ</span>;\n\nconst Berry = {\n  Avocado: 'Avocado',\n  Banana: 'Banana',\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      connected: false,\n      signedIn: false,\n      accountId: null,\n      account: null,\n      claiming: false,\n      bananaNum: 1,\n    };\n    this._balanceRefreshTimer = null;\n\n    this._initNear().then(() => {\n      this.setState({\n        connected: true,\n        signedIn: !!this._accountId,\n        accountId: this._accountId,\n      });\n    });\n  }\n\n  componentDidMount() {\n\n  }\n\n  parseBananaAccount(account, accountId) {\n    if (!account) {\n      account = {\n        accountId,\n        accountIndex: -1,\n        avocadoBalance: 25.0,\n        bananaBalance: 0.0,\n        bananaBalanceBN: new BN(0),\n        numPixels: 0,\n        farmingPreference: Berry.Avocado,\n      }\n    } else {\n      account = {\n        accountId: account.account_id,\n        accountIndex: account.account_index,\n        avocadoBalance: parseFloat(account.avocado_balance) / this._pixelCost,\n        bananaBalance: parseFloat(account.banana_balance) / this._pixelCost,\n        bananaBalanceBN: new BN(account.banana_balance),\n        numPixels: account.num_pixels,\n        farmingPreference: account.farming_preference,\n      }\n    }\n    account.startTime = new Date().getTime();\n    account.avocadoPixels = (account.farmingPreference === Berry.Avocado) ? (account.numPixels + 1) : 0;\n    account.bananaPixels = (account.farmingPreference === Berry.Banana) ? (account.numPixels) : 0;\n    account.avocadoRewardPerMs = account.avocadoPixels / (24 * 60 * 60 * 1000);\n    account.bananaRewardPerMs = account.bananaPixels / (24 * 60 * 60 * 1000);\n    account.bananaRewardPerMsBN = account.bananaBalanceBN.div(new BN(24 * 60 * 60 * 1000));\n    return account;\n  }\n\n  async getAccount(accountId, stats) {\n    const account = this.parseBananaAccount(\n      await this._bananaContract.get_account({account_id: accountId}),\n      accountId\n    );\n    let cucumberAccount = await this._contract.get_account({account_id: accountId});\n    if (!cucumberAccount) {\n      Object.assign(account, {\n        nearBalanceBn: new BN(0),\n        cucumberBalanceBn: new BN(0),\n        nearClaimed: 0,\n      });\n    } else {\n      Object.assign(account, {\n        nearBalanceBn: new BN(cucumberAccount.near_balance),\n        cucumberBalanceBn: new BN(cucumberAccount.cucumber_balance),\n        nearClaimed: parseFloat(cucumberAccount.near_claimed) / Math.pow(10, 24),\n      });\n    }\n    account.nearBalance = parseFloat(account.nearBalanceBn.toString()) / Math.pow(10, 24);\n    account.cucumberBalance = parseFloat(account.cucumberBalanceBn.toString()) / this._pixelCost;\n    account.percent = account.cucumberBalance * 100 / stats.totalSupply;\n    return account;\n  }\n\n  async refreshStats() {\n    const currentTime = new Date().getTime();\n    const lastReward = parseFloat(await this._bananaContract.get_last_reward_timestamp()) / 1e6;\n    const rawStats = await this._contract.get_stats();\n    const stats = {\n      totalSupplyBn: new BN(rawStats.total_cucumber_balance),\n      totalSupply: parseFloat(rawStats.total_cucumber_balance) / this._pixelCost,\n      totalNearClaimed: parseFloat(rawStats.total_near_claimed) / Math.pow(10, 24),\n      totalNearRewarded: parseFloat(rawStats.total_near_received) / Math.pow(10, 24),\n      timeUntilRewards: 1606019138008.904777 - currentTime,\n      timeFromLastRewards: currentTime - lastReward,\n    };\n    this.setState({\n      stats,\n    })\n  }\n\n  async refreshAccountStats() {\n    await this.refreshStats();\n    let account = await this.getAccount(this._accountId, this.state.stats);\n\n    if (this._balanceRefreshTimer) {\n      clearInterval(this._balanceRefreshTimer);\n      this._balanceRefreshTimer = null;\n    }\n\n    this.setState({\n      account,\n    });\n\n    this._balanceRefreshTimer = setInterval(() => {\n      const t = new Date().getTime() - account.startTime;\n      this.setState({\n        account: Object.assign({}, account, {\n          avocadoBalance: account.avocadoBalance + t * account.avocadoRewardPerMs,\n          bananaBalance: account.bananaBalance + t * account.bananaRewardPerMs,\n        }),\n      });\n    }, 100);\n  }\n\n  async _initNear() {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, NearConfig));\n    this._keyStore = keyStore;\n    this._near = near;\n\n    this._walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName);\n    this._accountId = this._walletConnection.getAccountId();\n\n    this._account = this._walletConnection.account();\n    this._bananaContract = new nearAPI.Contract(this._account, NearConfig.bananaContractName, {\n      viewMethods: ['get_account', 'get_last_reward_timestamp', 'get_account_by_index', 'get_lines', 'get_line_versions', 'get_pixel_cost', 'get_account_balance', 'get_account_num_pixels', 'get_account_id_by_index'],\n      changeMethods: ['transfer_with_vault',],\n    });\n    this._contract = new nearAPI.Contract(this._account, NearConfig.contractName, {\n      viewMethods: ['account_exists', 'get_account', 'get_stats', 'get_near_balance', 'get_total_near_claimed', 'get_total_near_received', 'get_balance', 'get_total_supply'],\n      changeMethods: ['claim_near', 'transfer_raw'],\n    });\n    this._pixelCostBN = new BN(await this._bananaContract.get_pixel_cost());\n    this._pixelCost = parseFloat(this._pixelCostBN.toString());\n    if (this._accountId) {\n      await this.refreshAccountStats();\n    } else {\n      await this.refreshStats();\n    }\n  }\n\n  async requestSignIn() {\n    const appTitle = 'Berry Farm';\n    await this._walletConnection.requestSignIn(\n        NearConfig.contractName,\n        appTitle\n    )\n  }\n\n  async logOut() {\n    this._walletConnection.signOut();\n    this._accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      accountId: this._accountId,\n    })\n  }\n\n  async stakeBananas(bananas) {\n    await this.refreshAccountStats();\n    if (bananas) {\n      bananas = new BN(Math.trunc(bananas * 100000)).mul(this._pixelCostBN).div(new BN(100000));\n    } else {\n      bananas = this.state.account.bananaBalanceBN;\n    }\n    await this._bananaContract.transfer_with_vault({\n      receiver_id: NearConfig.contractName,\n      amount: bananas.toString(),\n      payload: '\"DepositAndStake\"',\n    }, new BN(\"50000000000000\"), new BN(\"1\"))\n  }\n\n  async claimNear() {\n    this.setState({\n      claiming: true\n    });\n    await this._contract.claim_near();\n    await this.refreshAccountStats();\n    this.setState({\n      claiming: false\n    });\n  }\n\n  render() {\n    const account = this.state.account;\n    const fraction = 3;\n    const content = !this.state.connected ? (\n        <div>Connecting... <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span></div>\n    ) : (this.state.signedIn ? (\n        <div>\n          <div className=\"float-right\">\n            <button\n              className=\"btn btn-outline-secondary\"\n              onClick={() => this.logOut()}>Log out ({this.state.accountId})</button>\n          </div>\n          <div>\n            { account ? (\n              <div className=\"lines\">\n                <h3>Your Balances</h3>\n                  <div className=\"balances\">\n                    {Avocado}{' '}{account.avocadoBalance.toFixed(fraction)}\n                    {(account.avocadoPixels > 0) ? (\n                      <span>\n                        {' (+'}{account.avocadoPixels}{Avocado}{'/day)'}\n                      </span>\n                    ) : \"\"}\n                  </div>\n                  <div className=\"balances\">\n                    {Banana}{' '}{account.bananaBalance.toFixed(fraction)}\n                    {(account.bananaPixels > 0) ? (\n                      <span>\n                        {' (+'}{account.bananaPixels}{Banana}{'/day)'}\n                      </span>\n                    ) : \"\"}\n                  </div>\n                  <div>\n                    <div>\n                      <span className=\"balances label-for-swap\">{Banana}</span>\n                      <InputNumber\n                        className=\"balances swap-input\"\n                        min={0.001}\n                        max={this.state.account.bananaBalance}\n                        value={this.state.bananaNum}\n                        onChange={(bananaNum) => this.setState({bananaNum})}\n                        enableMobileNumericKeyboard\n                      />\n                      <button\n                        className={\"btn-max balances\"}\n                        disabled={account.bananaBalance === 0}\n                        onClick={() => this.setState({bananaNum: account.bananaBalance.toFixed(3)})}\n                      >\n                        MAX\n                      </button>\n\n                    <Swap\n                      account={this.state.account}\n                      stakeBananas={(b) => this.stakeBananas(b)}\n                      amount={this.state.bananaNum}\n                    />\n                    </div>\n                  </div>\n                  <div className=\"balances\">\n                    {Cucumber}{' '}{account.cucumberBalance.toFixed(fraction)}{' ('}{account.percent.toFixed(fraction)}{'% share)'}\n                  </div>\n                  <div>\n                    <button\n                      className={\"btn btn-success\" + ((account.nearBalance > 0) ? \" btn-large\" : \" hidden\")}\n                      disabled={this.state.claiming}\n                      onClick={() => this.claimNear()}\n                    >\n                      Claim {account.nearBalance.toFixed(fraction)} {Near}\n                    </button>\n                  </div>\n                  <div className=\"balances\">\n                    Earned {Near}{(account.nearClaimed + account.nearBalance).toFixed(fraction)}\n                  </div>\n              </div>\n            ) : \"\"}\n            </div>\n        </div>\n    ) : (\n        <div style={{marginBottom: \"10px\"}}>\n          <button\n              className=\"btn btn-primary\"\n              onClick={() => this.requestSignIn()}>Log in with NEAR Wallet</button>\n        </div>\n    ));\n    const stats = this.state.stats ? (\n        <div>\n          {(this.state.stats.timeUntilRewards > 0) ? (\n            <div>\n              <h3>Countdown until farming begins</h3>\n              <div className=\"timer\">\n                <Timer\n                  initialTime={this.state.stats.timeUntilRewards}\n                  direction=\"backward\"\n                  timeToUpdate={100}\n                  lastUnit=\"h\"\n                >\n                  {() => (\n                    <React.Fragment>\n                      <Timer.Hours />:\n                      <Timer.Minutes formatValue={v => `${v}`.padStart(2, '0')}/>:\n                      <Timer.Seconds formatValue={v => `${v}`.padStart(2, '0')} />.\n                      <Timer.Milliseconds formatValue={v => `${v}`.padStart(3, '0')} />\n                    </React.Fragment>\n                  )}\n                </Timer>\n              </div>\n            </div>\n            ) : (\n              <div>\n                <h3>Time from last reward</h3>\n                <div className=\"timer small\">\n                  <Timer\n                    initialTime={this.state.stats.timeFromLastRewards}\n                    direction=\"forward\"\n                    timeToUpdate={100}\n                    lastUnit=\"h\"\n                  >\n                    {() => (\n                      <React.Fragment>\n                        <Timer.Hours />:\n                        <Timer.Minutes formatValue={v => `${v}`.padStart(2, '0')}/>:\n                        <Timer.Seconds formatValue={v => `${v}`.padStart(2, '0')} />.\n                        <Timer.Milliseconds formatValue={v => `${v}`.padStart(3, '0')} />\n                      </React.Fragment>\n                    )}\n                  </Timer>\n                </div>\n                Use {Avocado} to draw on berry club to trigger {Near} rewards distribution.\n              </div>\n          )}\n          <h3>Global Farming Stats</h3>\n          <div className=\"lines\">\n            <div>\n              <span className=\"label\">Total {Cucumber} Supplied</span>\n              <span className=\"balances\">{this.state.stats.totalSupply.toFixed(3)}</span>\n            </div>\n            <div>\n              <span className=\"label\">Total {Near} Rewarded</span>\n              <span className=\"balances\">{this.state.stats.totalNearRewarded.toFixed(3)}</span>\n            </div>\n            <div>\n              <span className=\"label\">Total {Near} Claimed</span>\n              <span className=\"balances\">{this.state.stats.totalNearClaimed.toFixed(3)}</span>\n            </div>\n\n          </div>\n        </div>\n      ) : \"\";\n    return (\n        <div className=\"container\">\n          <div className=\"row\">\n            <div>\n              <div>\n              <h2>Berry Farm {Cucumber}</h2>\n              <a\n                className=\"btn btn-outline-none\"\n                href=\"https://berryclub.io\">{Avocado} Berry Club {Banana}\n              </a>\n              </div>\n              <div className=\"call-to-action\">\n                Swap {Banana} to stake {Cucumber} to farm {Near}\n              </div>\n              {content}\n              {stats}\n              <div>\n              </div>\n            </div>\n          </div>\n        </div>\n    );\n  }\n}\n\nconst Swap = (props) => {\n  return (\n    <button\n      className={\"btn btn-large\" + (props.amount === 0 ? \" btn-success\" : \"\")}\n      disabled={props.account.bananaBalance < props.amount}\n      onClick={() => props.stakeBananas(props.amount)}\n    >\n      Swap <span className=\"font-weight-bold\">{props.amount || \"\"}{props.amount ? \"\" : \"ALL\"}{Banana}</span> to <span className=\"font-weight-bold\">{Cucumber}</span>\n    </button>\n  );\n}\n\n/*\nconst Account = (props) => {\n  const accountId = props.accountId;\n  const shortAccountId = (accountId.length > 6 + 6 + 3) ?\n    (accountId.slice(0, 6) + '...' + accountId.slice(-6)) :\n    accountId;\n  return <a className=\"account\"\n            href={`https://wayback.berryclub.io/${accountId}`}>{shortAccountId}</a>\n}\n*/\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}